<!DOCTYPE html>
<html>
<head>
    <title>Checkout - Cream and Crumble</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <style>
    /* Basic Styling (Customize as needed) */
    .cart-item {
        display: flex;
        align-items: center;
        border-bottom: 1px solid #ccc;
        padding: 15px;
    }

    .item-image {
        width: 80px;
        margin-right: 15px;
    }

    .item-details {
        flex-grow: 1;
    }
</style>
    </head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">Cream and Crumble</a> 
        </div>
    </nav>

    <div class="container mt-5"> 
        <br><br>
        <h1>Shopping Cart</h1>
        <button id="refreshButton" class="btn btn-secondary mb-3">Refresh Cart</button>
        <a class="btn btn-primary" href="products.html">Add more products! </a>
        <div id="cart-items" class="row">
            </div>

        <h2>Order Summary</h2>
        <div id="orderSummary" class="mt-3">
            </div>

        <div class="text-center mt-4">
            <h3 id="totalPrice">Total: Ksh 0.00</h3>   <button id="checkoutButton" class="btn btn-primary">Proceed to Complete purchase</button>
        </div>
    </div>

    <footer class="footer mt-auto py-3 bg-light">
        <div class="container text-center">
            <span class="text-muted">&copy; 2024 Cream and Crumble</span>
        </div>
    </footer>

    <script>

        // Function to get order data from local storage
        function getOrderDataFromStorage() {
            const orderDataString = localStorage.getItem('orderData');
            if (orderDataString) {
                return JSON.parse(orderDataString);
            } else {
                return null; // No order data found
            }
        }

        const orderData = getOrderDataFromStorage();
        const cartItemsElement = document.getElementById("cart-items");
        const orderSummaryElement = document.getElementById("orderSummary");
        const totalPriceElement = document.getElementById("totalPrice");

        function updateCartDisplay() {
            const orderData = getOrderDataFromStorage();
            let total = 0;
            cartItemsElement.innerHTML = ''; // Clear previous items
            orderSummaryElement.innerHTML = '';

            if (orderData && orderData.length > 0) {
                orderData.forEach(item => {
                    // ... (rest of your item display logic)
                    total += item.price;
                });
            } else {
                cartItemsElement.innerHTML = "<p>Your cart is empty.</p>";
                orderSummaryElement.innerHTML = "<p>Your cart is empty.</p>";
            }
            totalPriceElement.textContent = `Total: Ksh ${total.toFixed(2)}`;
        }

        refreshButton.addEventListener("click", function() {
            localStorage.removeItem('orderData');
            updateCartDisplay();
        });

        // Initial display on page load
        updateCartDisplay();

        let total = 0; 

        if (orderData && orderData.length > 0) {
            orderData.forEach(item => {
                const itemElement = document.createElement("div");
                itemElement.classList.add("cart-item");
                itemElement.innerHTML = `
                    <img class="item-image" src="https://via.placeholder.com/80" alt="${item.name}">
                    <div class="item-details">
                        <h3>${item.name}</h3>
                        <p>Quantity: ${item.quantity}</p>
                        <p>Price: Ksh ${item.price.toFixed(2)}</p>
                    </div>
                `;
                cartItemsElement.appendChild(itemElement);
                orderSummaryElement.appendChild(itemElement.cloneNode(true)); 

                total += item.price; 
            });
        } else {
            cartItemsElement.innerHTML = "<p>Your cart is empty.</p>";
            orderSummaryElement.innerHTML = "<p>Your cart is empty.</p>";
        }

        totalPriceElement.textContent = `Total: Ksh ${total.toFixed(2)}`; 

     </script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> 
</body>
</html>
